{% extends 'base.html.twig' %}

{% block title %}{{ post.seoTitle }}{% endblock %}
{% block meta_description %}{{ post.seoDescription }}{% endblock %}

{% block body %}

	<div class="container max-w-3xl mx-auto py-6 px-4 xl:px-0">

		{%- for flashSuccess in app.flashes('success') -%}
			<div class="flex p-4 mb-6 text-sm text-green-400 rounded-lg bg-gray-800" role="alert">
				<svg aria-hidden="true" class="flex-shrink-0 inline w-5 h-5 mr-3" fill="currentColor" viewbox="0 0 20 20" xmlns="http://www.w3.org/2000/svg">
					<path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z" clip-rule="evenodd"></path>
				</svg>
				<span class="sr-only">Info</span>
				<div>
					<span class="font-medium">{{ flashSuccess }}</span>
				</div>
			</div>
		{%- endfor -%}
		{%- for flashError in app.flashes('error') -%}
			<div class="flex p-4 mb-6 text-sm text-red-400 rounded-lg bg-gray-800" role="alert">
				<svg aria-hidden="true" class="flex-shrink-0 inline w-5 h-5 mr-3" fill="currentColor" viewbox="0 0 20 20" xmlns="http://www.w3.org/2000/svg">
					<path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z" clip-rule="evenodd"></path>
				</svg>
				<span class="sr-only">Info</span>
				<div>
					<span class="font-medium">{{ flashError }}</span>
				</div>
			</div>
		{%- endfor -%}

		<div class="flex justify-between rounded-xl p-6">
			<div class="mx-auto w-full format format-sm sm:format-base lg:format-lg format-invert">
				{% if post.tags | length > 0 -%}
					<div class="mb-4 lg:mb-6 text-gray-300">

						{% for tag in post.tags -%}
							{% include 'components/_tag.html.twig' with {'tag': tag} only %}
						{% endfor ~%}

					</div>
				{% endif ~%}
				<p class="text-gray-300">{{ post.content }}</p>
				<div class="flex justify-end font-medium text-gray-300 mt-4 lg:mt-6">
					{%~ include 'components/_favorite.html.twig' with {'favorites': post.favorites, 'favorite_url': path('app_post_favorite', {slug: post.slug})} only ~%}
					{%~ include 'components/_like.html.twig' with {'likes': post.likes, 'like_url': path('app_post_like', {slug: post.slug})} only ~%}
				</div>
			</div>
		</div>

		{% if app.user %}
			<!-- Comment Form -->
			{{ form_start(form, {'attr': {'class': 'p-4 rounded-lg'}}) }}
			{%~ include 'components/_textarea.html.twig' with {'field': form.content, 'label': 'Write a comment'} %}
			<div class="flex justify-end mt-2">
				<button type="submit" class="border border-gray-700 font-medium rounded-lg text-xs px-3 py-1.5 text-center border-gray-600 hover:bg-gray-600 focus:ring-gray-800 text-gray-300 hover:text-white">
					Confirm
				</button>
			</div>
			{{ form_end(form) }}
			<!-- End Comment Form -->
		{% endif %}

		<div class="divide-y divide-gray-700">
			{% for comment in comments %}
				{% include 'components/_comment.html.twig' with {'comment': comment} only %}
			{% endfor %}
		</div>

	</div>

{% endblock %}
